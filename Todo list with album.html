<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #7C73C0; 
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        


        #app {
            background-color: #E8FFCE; 
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 16px;
            width: 100%;
            max-width: 1200px;
            box-sizing: border-box;
            overflow-x: auto; 
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ACFADF; 
        }

        th {
            background-color: #94ADD7; 
            color: #ffffff;
        }

        td {
            background-color: #E8FFCE; 
        }

        .btn-kathan {
            background-color: #7C73C0; 
            color: #ffffff;
        }

        .btn-kathan:hover {
            background-color: #94ADD7; 
        }

        .expanded-todo {
            max-width: 300px;
            word-wrap: break-word;
        }

        #album-content {
            flex-wrap: wrap;
            gap: 16px;
        }

        .dynamic-item {
            background-color: #ACFADF; 
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 12px;
        }

       
        #todo-content .dynamic-item {
            margin-bottom: 16px; 
        }

        
        .close-todo {
            margin-top: 16px; 
            text-align: center; 
            cursor: pointer; 
            color: #ffffff;
            background-color: #7C73C0; 
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
        }

        .close-todo:hover {
            background-color: #94ADD7; 
        }

       
        .edit-input {
            width: 100%;
            padding: 8px;
        }

        .edit-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            margin-right: 8px; 
        }
    </style>
    <title>Kathan Shah</title>
    
</head>
<body>

    <div id="app">
        <table id="user-content" class="w-full border">
            <thead>
                <tr class="bg-blue-500">
                    <th class="py-2 px-4 border">ID</th>
                    <th class="py-2 px-4 border">Name</th>
                    <th class="py-2 px-4 border">Username</th>
                    <th class="py-2 px-4 border">Email</th>
                    <th class="py-2 px-4 border text-center">To-Do</th>
                    <th class="py-2 px-4 border text-center">Album</th>
                </tr>
            </thead>
           
            <tbody> </tbody>
        </table>

        
        <div id="todo-content"></div>

        <div id="album-content">

        </div>

    </div>

    <script>
        let loadusers = async () => {
            try {
                let p = await fetch('https://jsonplaceholder.typicode.com/users');
                let users = await p.json();
                const user_content = document.querySelector("#user-content");
                for (let i in users) {
                    const tr = document.createElement("tr");
                    tr.setAttribute("class", "bg-blue-700 border-b-2 border-blue-600 hover:bg-blue-600 text-xs sm:text-sm")
                    tr.innerHTML = `<td class="px-6 py-4">${users[i].id}</td>
                        <td class="sm:px-6 sm:py-4 px-3 py-1">${users[i].name}</td>
                        <td class="sm:px-6 sm:py-4 px-3 py-1">${users[i].username}</td>
                        <td class="sm:px-6 sm:py-4 px-3 py-1">${users[i].email}</td>
                        <td class="sm:px-6 sm:py-4 px-3 py-1 text-center"><button class="btn-kathan" onclick=openToDos(${users[i].id})>To-Do</button></td>
                        <td class="sm:px-6 sm:py-4 px-3 py-1 text-center"><button class="btn-kathan" onclick=openAlbums(${users[i].id})>Album</button></td>`
                    user_content.appendChild(tr)
                }
            }
            catch (error) {
                alert("Error Fetching Data ", error)
            }
        }

        let openToDos = async (id) => {
            const todoContent = document.getElementById("todo-content");

            try {
                let response = await fetch(`https://jsonplaceholder.typicode.com/todos?userId=${id}`);
                let todos = await response.json();

                
                todoContent.innerHTML = "";

                
                const todoContainer = document.createElement("div");

                let taskCount = 0;
                const maxTasks = 3; 

                
                todos.forEach(todo => {
                    if (taskCount >= maxTasks) {
                        return; 
                    }

                    const todoItem = document.createElement("div");
                    todoItem.classList.add("dynamic-item");

                    const taskElement = document.createElement("p");
                    
                    if (todo.id === 1) {
                        taskElement.textContent = "Homework";
                    } else if (todo.id === 2) {
                        taskElement.textContent = "Unicode Task1";
                    } else if (todo.id === 3) {
                        taskElement.textContent = "Bring Groceries";
                    }

                    const statusElement = document.createElement("span");
                    statusElement.textContent = todo.completed ? "Completed" : "Not Completed";
                    statusElement.classList.add(todo.completed ? "completed" : "not-completed");

                   
                    const editButton = document.createElement("button");
                    editButton.textContent = "Edit";
                    editButton.onclick = () => editTask(taskElement);

                    const deleteButton = document.createElement("button");
                    deleteButton.textContent = "Delete";
                    deleteButton.onclick = () => deleteTask(todoItem);

                    
                    const editDeleteContainer = document.createElement("div");
                    editDeleteContainer.appendChild(editButton);
                    editDeleteContainer.appendChild(deleteButton);

                    todoItem.appendChild(taskElement);
                    todoItem.appendChild(statusElement);
                    todoItem.appendChild(editDeleteContainer);

                    todoContainer.appendChild(todoItem);

                    taskCount++;
                });

                
                todoContent.appendChild(todoContainer);

                
                const closeTodoButton = document.createElement("button");
                closeTodoButton.classList.add("close-todo");
                closeTodoButton.textContent = "Close Todo";
                closeTodoButton.onclick = closeTodoList;

                todoContent.appendChild(closeTodoButton);
            } catch (error) {
                console.error("Error fetching todo data:", error);
            }
        }

        let closeTodoList = () => {
            const todoContent = document.getElementById("todo-content");
            todoContent.innerHTML = ""; 
        }

        let editTask = (taskElement) => {
            
            const editInput = document.createElement("input");
            editInput.classList.add("edit-input");
            editInput.value = taskElement.textContent;

            
            const saveButton = document.createElement("button");
            saveButton.textContent = "Save";
            saveButton.onclick = () => saveEditedTask(taskElement, editInput);

            const cancelButton = document.createElement("button");
            cancelButton.textContent = "Cancel";
            cancelButton.onclick = () => cancelEditTask(taskElement, editInput);

            
            const editButtonsContainer = document.createElement("div");
            editButtonsContainer.classList.add("edit-buttons");
            editButtonsContainer.appendChild(saveButton);
            editButtonsContainer.appendChild(cancelButton);

            
            taskElement.replaceWith(editInput);

            
            editInput.parentNode.appendChild(editButtonsContainer);

           
            const editDeleteContainer = taskElement.nextElementSibling;
            if (editDeleteContainer) {
                editDeleteContainer.style.display = "none";
            }
        }

        let saveEditedTask = (taskElement, editInput) => {
            
            taskElement.textContent = editInput.value;

            
            editInput.remove();
            const editButtonsContainer = taskElement.nextElementSibling;
            if (editButtonsContainer) {
                editButtonsContainer.remove();
            }

            
            const editDeleteContainer = taskElement.nextElementSibling;
            if (editDeleteContainer) {
                editDeleteContainer.style.display = "block";
            }
        }

        let cancelEditTask = (taskElement, editInput) => {
          
            editInput.value = taskElement.textContent;

            
            editInput.remove();
            const editButtonsContainer = taskElement.nextElementSibling;
            if (editButtonsContainer) {
                editButtonsContainer.remove();
            }

            const editDeleteContainer = taskElement.nextElementSibling;
            if (editDeleteContainer) {
                editDeleteContainer.style.display = "block";
            }
        }

        let deleteTask = (todoItem) => {
            
            todoItem.remove();
        }

        let openAlbums = (id) => {
            const albumContent = document.getElementById("album-content");

            try {
                
                albumContent.innerHTML = "";

                
                const albumContainer = document.createElement("div");

                
                const photo1 = document.createElement("div");
                photo1.classList.add("album-photo");
                photo1.innerHTML = '<a href="#">Photo 1</a>';

                const photo2 = document.createElement("div");
                photo2.classList.add("album-photo");
                photo2.innerHTML = '<a href="#">Photo 2</a>';

                const photo3 = document.createElement("div");
                photo3.classList.add("album-photo");
                photo3.innerHTML = '<a href="#">Photo 3</a>';

                albumContainer.appendChild(photo1);
                albumContainer.appendChild(photo2);
                albumContainer.appendChild(photo3);

                
                const closeAlbumButton = document.createElement("button");
                closeAlbumButton.classList.add("close-album");
                closeAlbumButton.textContent = "Close Album";
                closeAlbumButton.onclick = closeAlbum;

                albumContainer.appendChild(closeAlbumButton);

                
                albumContent.appendChild(albumContainer);

                
                const closeTodoButton = document.querySelector(".close-todo");
                closeTodoButton.style.display = "none";
            } catch (error) {
                console.error("Error opening album:", error);
            }
        }

        let closeAlbum = () => {
            const albumContent = document.getElementById("album-content");

            
            albumContent.innerHTML = "";

            
            const closeTodoButton = document.querySelector(".close-todo");
            closeTodoButton.style.display = "block";
        }

        
        loadusers();
    </script>
</body>
</html>

